---
// Custom Cursor Effects Component with Golden Stardust
---

<script>
  // Golden Stardust Cursor Effects
  function initCursorEffects() {
    let lastX = 0;
    let lastY = 0;
    let stardustTimer: number | null = null;

    // Update mouse position and create stardust
    document.addEventListener('mousemove', (e) => {
      const currentX = e.clientX;
      const currentY = e.clientY;
      
      // Calculate mouse movement speed
      const deltaX = currentX - lastX;
      const deltaY = currentY - lastY;
      const speed = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
      
      // Create more stardust when moving faster, but keep it elegant
      const shouldCreateStardust = Math.random() > 0.7; // MÃ¡s frecuente pero tenue
      
      if (shouldCreateStardust) {
        createStardust(currentX, currentY);
      }
      
      // Occasionally create a star sparkle (very subtle)
      if (Math.random() > 0.95 && speed > 2) {
        createStar(currentX, currentY);
      }
      
      lastX = currentX;
      lastY = currentY;
    });

    // Click effect - Burst of golden stars
    document.addEventListener('click', (e) => {
      createGoldenBurst(e.clientX, e.clientY);
    });

    // Create elegant stardust particle
    function createStardust(x: number, y: number) {
      const stardust = document.createElement('div');
      stardust.className = 'cursor-stardust';
      
      // Random offset for natural look
      const offsetX = (Math.random() - 0.5) * 15;
      const offsetY = (Math.random() - 0.5) * 15;
      
      stardust.style.left = (x + offsetX) + 'px';
      stardust.style.top = (y + offsetY) + 'px';
      
      // Random size for variety (very small and subtle)
      const size = 2 + Math.random() * 3;
      stardust.style.width = size + 'px';
      stardust.style.height = size + 'px';
      
      // Random delay for twinkling effect
      stardust.style.animationDelay = (Math.random() * 0.2) + 's';
      
      document.body.appendChild(stardust);
      
      setTimeout(() => stardust.remove(), 1200);
    }

    // Create star sparkle (emoji star)
    function createStar(x: number, y: number) {
      const star = document.createElement('div');
      star.className = 'cursor-star';
      
      const offsetX = (Math.random() - 0.5) * 20;
      const offsetY = (Math.random() - 0.5) * 20;
      
      star.style.left = (x + offsetX) + 'px';
      star.style.top = (y + offsetY) + 'px';
      
      document.body.appendChild(star);
      
      setTimeout(() => star.remove(), 1000);
    }

    // Create golden burst on click
    function createGoldenBurst(x: number, y: number) {
      const burstCount = 12; // More particles for magical effect
      
      for (let i = 0; i < burstCount; i++) {
        const stardust = document.createElement('div');
        stardust.className = 'cursor-stardust';
        
        const angle = (Math.PI * 2 * i) / burstCount;
        const velocity = 15 + Math.random() * 25;
        const offsetX = Math.cos(angle) * velocity;
        const offsetY = Math.sin(angle) * velocity;
        
        stardust.style.left = x + 'px';
        stardust.style.top = y + 'px';
        
        // Animate outward
        setTimeout(() => {
          stardust.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
          stardust.style.transition = 'transform 0.8s ease-out';
        }, 10);
        
        const size = 3 + Math.random() * 2;
        stardust.style.width = size + 'px';
        stardust.style.height = size + 'px';
        
        document.body.appendChild(stardust);
        
        setTimeout(() => stardust.remove(), 1200);
      }
      
      // Add a few stars to the burst
      for (let i = 0; i < 3; i++) {
        setTimeout(() => {
          createStar(x, y);
        }, i * 100);
      }
    }
  }

  // Initialize on page load
  document.addEventListener('astro:page-load', initCursorEffects);
  
  // Also initialize on first load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCursorEffects);
  } else {
    initCursorEffects();
  }
</script>

<style>
  /* Golden stardust blending for elegant effect */
  .cursor-stardust,
  .cursor-star {
    mix-blend-mode: screen;
  }
</style>

