---
// LinkedIn Activity Component
// Note: LinkedIn doesn't provide API access to activity feed
// This component shows: Profile Badge + Featured Posts (manually updated)

interface Props {
  featuredPosts?: Array<{
    title: string;
    excerpt: string;
    date: string;
    url: string;
    image?: string;
  }>;
}

const { featuredPosts = [] } = Astro.props;
---

<div class='linkedin-activity'>
  <!-- LinkedIn Profile Section -->
  <div class='linkedin-profile-section mb-6'>
    <div class='grid md:grid-cols-2 gap-6'>
      <!-- LinkedIn Badge -->
      <div class='linkedin-badge-wrapper'>
        <script src="https://platform.linkedin.com/badges/js/profile.js" async defer type="text/javascript"></script>
        <div 
          class="badge-base LI-profile-badge" 
          data-locale="en_US" 
          data-size="large" 
          data-theme="light" 
          data-type="VERTICAL" 
          data-vanity="oscar-cuadra-navarro-4bbb5743" 
          data-version="v1"
        >
          <a 
            class="badge-base__link LI-simple-link" 
            href="https://www.linkedin.com/in/oscar-cuadra-navarro-4bbb5743?trk=profile-badge"
            target="_blank"
            rel="noopener noreferrer"
          >
            Oscar Cuadra Navarro
          </a>
        </div>
      </div>

      <!-- LinkedIn Profile Embed (Public Profile) -->
      <div class='linkedin-profile-embed'>
        <iframe 
          src="https://www.linkedin.com/embed/feed/update/urn:li:share:6898694772484112384"
          height="400" 
          width="100%" 
          frameborder="0" 
          allowfullscreen="" 
          title="Embedded post"
          style="border: 3px solid black;"
          class="hidden"
        ></iframe>
        
        <!-- Profile Summary Card -->
        <div class='profile-summary-card'>
          <h3 class='text-2xl font-bold mb-4 outfit'>Professional Profile</h3>
          <div class='space-y-3 poppins'>
            <p class='flex items-center gap-2'>
              <span class='text-xl'>üë®‚Äçüíª</span>
              <span>iOS Engineer</span>
            </p>
            <p class='flex items-center gap-2'>
              <span class='text-xl'>üìç</span>
              <span>View full profile on LinkedIn</span>
            </p>
            <a 
              href="https://www.linkedin.com/in/oscar-cuadra-navarro-4bbb5743/" 
              target="_blank"
              rel="noopener noreferrer"
              class='inline-block mt-4 px-6 py-3 bg-blue text-white font-semibold hover:bg-opacity-90 transition-all border-2 border-black'
            >
              Visit LinkedIn Profile ‚Üí
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Featured LinkedIn Posts Section -->
  {featuredPosts.length > 0 && (
    <div class='featured-posts-section mt-8'>
      <h3 class='text-3xl md:text-4xl mb-6 dm-serif'>Recent LinkedIn Activity</h3>
      <div class='grid md:grid-cols-2 gap-6'>
        {featuredPosts.map((post) => (
          <a 
            href={post.url} 
            target="_blank" 
            rel="noopener noreferrer"
            class='post-card block'
          >
            {post.image && (
              <div class='post-image mb-4'>
                <img src={post.image} alt={post.title} class='w-full h-48 object-cover' />
              </div>
            )}
            <div class='post-content p-4'>
              <p class='text-sm text-gray-600 mb-2 sanchez'>{post.date}</p>
              <h4 class='text-xl font-bold mb-2 outfit'>{post.title}</h4>
              <p class='poppins text-base'>{post.excerpt}</p>
              <span class='inline-block mt-3 text-blue font-semibold'>
                Read on LinkedIn ‚Üí
              </span>
            </div>
          </a>
        ))}
      </div>
    </div>
  )}

  <!-- Placeholder for Manual Updates -->
  {featuredPosts.length === 0 && (
    <div class='no-posts-placeholder mt-8 p-8 text-center'>
      <div class='max-w-2xl mx-auto'>
        <h3 class='text-2xl md:text-3xl mb-4 outfit'>Connect with me on LinkedIn</h3>
        <p class='poppins text-lg mb-6'>
          Follow my professional journey, insights on iOS development, and latest projects.
        </p>
        <a 
          href="https://www.linkedin.com/in/oscar-cuadra-navarro-4bbb5743/" 
          target="_blank"
          rel="noopener noreferrer"
          class='inline-block px-8 py-4 bg-[#0077B5] text-white font-bold text-lg hover:bg-opacity-90 transition-all border-3 border-black card-shadow outfit'
        >
          Follow on LinkedIn
        </a>
      </div>
    </div>
  )}
</div>

<style>
  .linkedin-activity {
    width: 100%;
  }

  .linkedin-badge-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    background: white;
    border: 3px solid black;
    padding: 2rem;
    min-height: 300px;
  }

  .linkedin-profile-embed {
    background: white;
    border: 3px solid black;
    padding: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .profile-summary-card {
    width: 100%;
  }

  .post-card {
    background: white;
    border: 3px solid black;
    transition: all 0.3s ease;
    overflow: hidden;
  }

  .post-card:hover {
    transform: translateY(-4px);
    box-shadow: 8px 8px 0 rgb(0 0 0 / 1);
  }

  .post-image {
    border-bottom: 3px solid black;
  }

  .no-posts-placeholder {
    background: white;
    border: 3px solid black;
  }
</style>

